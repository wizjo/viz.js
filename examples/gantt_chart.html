<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title id="viz-title">Gantt Chart</title>
    <link type="text/css" rel="stylesheet" href="stylesheets/example.css"/>
    <link type="text/css" rel="stylesheet" href="stylesheets/tipsy.css"/>
    
    <!-- jquery -->
    <script type="text/javascript" src="../bower_components/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="../bower_components/tipsy/src/javascripts/jquery.tipsy.js"></script>
    
    <!-- d3 -->
    <script type="text/javascript" src="../bower_components/d3/d3.min.js"></script>
    
    <!-- viz.js -->
    <script type="text/javascript" src="../dist/viz.js"></script>
  </head>
  <body>
    <h1>Gantt Chart</h1>
    <div class="chart" id="chart-div" style="width:1200px; height:900px;"></div>
    <script type="text/javascript">
      var data = [
        { "param":{"code":"2001"},
          "titleLink":"/schedules/1",
          "values":[
            {"tipLink":"schedules/1/executions/553363","end_time":"2012-02-10 00:03:27","state":"succeeded","label":"Ran on Feb 10, 2012 at 12:03:23 AM <br /> Succeeded on Feb 10, 2012 at 12:03:27 AM <br />Duration: 3.9","start_time":"2012-02-10 00:03:23"},
            {"tipLink":"schedules/1/executions/555773","end_time":"2012-02-10 12:03:18","state":"succeeded","label":"Ran on Feb 10, 2012 at 12:03:16 PM <br /> Succeeded on Feb 10, 2012 at 12:03:18 PM <br />Duration: 2.6","start_time":"2012-02-10 12:03:16"}
          ],
          "label":"group-a",
          "id":1
        },
        { "param":{"code":"2001"},
          "titleLink":"schedules/2",
          "values":[
            {"tipLink":"schedules/2/executions/551432","end_time":"2012-02-09 14:02:41","state":"succeeded","label":"Ran on Feb  9, 2012 at  2:02:28 PM <br /> Succeeded on Feb  9, 2012 at  2:02:41 PM <br />Duration: 13.5","start_time":"2012-02-09 14:02:28"},
            {"tipLink":"schedules/2/executions/551661","end_time":"2012-02-09 15:03:41","state":"succeeded","label":"Ran on Feb  9, 2012 at  3:03:29 PM <br /> Succeeded on Feb  9, 2012 at  3:03:41 PM <br />Duration: 12.0","start_time":"2012-02-09 15:03:29"},
            {"tipLink":"schedules/2/executions/551868","end_time":"2012-02-09 16:02:41","state":"succeeded","label":"Ran on Feb  9, 2012 at  4:02:30 PM <br /> Succeeded on Feb  9, 2012 at  4:02:41 PM <br />Duration: 10.5","start_time":"2012-02-09 16:02:30"},
            {"tipLink":"schedules/2/executions/552112","end_time":"2012-02-09 17:02:41","state":"succeeded","label":"Ran on Feb  9, 2012 at  5:02:32 PM <br /> Succeeded on Feb  9, 2012 at  5:02:41 PM <br />Duration: 9.4","start_time":"2012-02-09 17:02:32"},
            {"tipLink":"schedules/2/executions/552298","end_time":"2012-02-09 18:02:32","state":"succeeded","label":"Ran on Feb  9, 2012 at  6:02:28 PM <br /> Succeeded on Feb  9, 2012 at  6:02:32 PM <br />Duration: 4.0","start_time":"2012-02-09 18:02:28"},
            {"tipLink":"schedules/2/executions/552478","end_time":"2012-02-09 19:02:30","state":"succeeded","label":"Ran on Feb  9, 2012 at  7:02:25 PM <br /> Succeeded on Feb  9, 2012 at  7:02:30 PM <br />Duration: 5.0","start_time":"2012-02-09 19:02:25"},
            {"tipLink":"schedules/2/executions/552668","end_time":"2012-02-09 20:02:40","state":"succeeded","label":"Ran on Feb  9, 2012 at  8:02:30 PM <br /> Succeeded on Feb  9, 2012 at  8:02:40 PM <br />Duration: 9.4","start_time":"2012-02-09 20:02:30"},
            {"tipLink":"schedules/2/executions/552826","end_time":"2012-02-09 21:02:32","state":"succeeded","label":"Ran on Feb  9, 2012 at  9:02:28 PM <br /> Succeeded on Feb  9, 2012 at  9:02:32 PM <br />Duration: 3.9","start_time":"2012-02-09 21:02:28"},
            {"tipLink":"schedules/2/executions/553009","end_time":"2012-02-09 22:02:35","state":"succeeded","label":"Ran on Feb  9, 2012 at 10:02:30 PM <br /> Succeeded on Feb  9, 2012 at 10:02:35 PM <br />Duration: 5.0","start_time":"2012-02-09 22:02:30"},
            {"tipLink":"schedules/2/executions/553171","end_time":"2012-02-09 23:02:29","state":"succeeded","label":"Ran on Feb  9, 2012 at 11:02:25 PM <br /> Succeeded on Feb  9, 2012 at 11:02:29 PM <br />Duration: 4.0","start_time":"2012-02-09 23:02:25"},
            {"tipLink":"schedules/2/executions/553345","end_time":"2012-02-10 00:02:43","state":"succeeded","label":"Ran on Feb 10, 2012 at 12:02:29 AM <br /> Succeeded on Feb 10, 2012 at 12:02:43 AM <br />Duration: 14.1","start_time":"2012-02-10 00:02:29"},
            {"tipLink":"schedules/2/executions/553833","end_time":"2012-02-10 01:02:31","state":"succeeded","label":"Ran on Feb 10, 2012 at  1:02:26 AM <br /> Succeeded on Feb 10, 2012 at  1:02:31 AM <br />Duration: 5.8","start_time":"2012-02-10 01:02:26"},
            {"tipLink":"schedules/2/executions/554002","end_time":"2012-02-10 02:02:35","state":"succeeded","label":"Ran on Feb 10, 2012 at  2:02:29 AM <br /> Succeeded on Feb 10, 2012 at  2:02:35 AM <br />Duration: 6.42657518386841","start_time":"2012-02-10 02:02:29"},
            {"tipLink":"schedules/2/executions/554162","end_time":"2012-02-10 03:02:23","state":"succeeded","label":"Ran on Feb 10, 2012 at  3:02:20 AM <br /> Succeeded on Feb 10, 2012 at  3:02:23 AM <br />Duration: 3.0","start_time":"2012-02-10 03:02:20"},
            {"tipLink":"schedules/2/executions/554353","end_time":"2012-02-10 04:02:31","state":"succeeded","label":"Ran on Feb 10, 2012 at  4:02:27 AM <br /> Succeeded on Feb 10, 2012 at  4:02:31 AM <br />Duration: 4.5","start_time":"2012-02-10 04:02:27"},
            {"tipLink":"schedules/2/executions/554529","end_time":"2012-02-10 05:02:35","state":"succeeded","label":"Ran on Feb 10, 2012 at  5:02:29 AM <br /> Succeeded on Feb 10, 2012 at  5:02:35 AM <br />Duration: 5.6","start_time":"2012-02-10 05:02:29"},
            {"tipLink":"schedules/2/executions/554693","end_time":"2012-02-10 06:02:31","state":"succeeded","label":"Ran on Feb 10, 2012 at  6:02:28 AM <br /> Succeeded on Feb 10, 2012 at  6:02:31 AM <br />Duration: 3.3","start_time":"2012-02-10 06:02:28"},
            {"tipLink":"schedules/2/executions/554876","end_time":"2012-02-10 07:02:33","state":"succeeded","label":"Ran on Feb 10, 2012 at  7:02:29 AM <br /> Succeeded on Feb 10, 2012 at  7:02:33 AM <br />Duration: 3.7","start_time":"2012-02-10 07:02:29"},
            {"tipLink":"schedules/2/executions/555037","end_time":"2012-02-10 08:02:35","state":"succeeded","label":"Ran on Feb 10, 2012 at  8:02:27 AM <br /> Succeeded on Feb 10, 2012 at  8:02:35 AM <br />Duration: 8.0","start_time":"2012-02-10 08:02:27"},
            {"tipLink":"schedules/2/executions/555261","end_time":"2012-02-10 09:03:28","state":"succeeded","label":"Ran on Feb 10, 2012 at  9:03:24 AM <br /> Succeeded on Feb 10, 2012 at  9:03:28 AM <br />Duration: 3.7","start_time":"2012-02-10 09:03:24"},
            {"tipLink":"schedules/2/executions/555439","end_time":"2012-02-10 10:03:26","state":"succeeded","label":"Ran on Feb 10, 2012 at 10:03:22 AM <br /> Succeeded on Feb 10, 2012 at 10:03:26 AM <br />Duration: 3.5","start_time":"2012-02-10 10:03:22"},
            {"tipLink":"schedules/2/executions/555582","end_time":"2012-02-10 11:02:32","state":"succeeded","label":"Ran on Feb 10, 2012 at 11:02:28 AM <br /> Succeeded on Feb 10, 2012 at 11:02:32 AM <br />Duration: 4.0","start_time":"2012-02-10 11:02:28"},
            {"tipLink":"schedules/2/executions/555761","end_time":"2012-02-10 12:02:38","state":"succeeded","label":"Ran on Feb 10, 2012 at 12:02:29 PM <br /> Succeeded on Feb 10, 2012 at 12:02:38 PM <br />Duration: 9.5","start_time":"2012-02-10 12:02:29"},
            {"tipLink":"schedules/2/executions/555933","end_time":"2012-02-10 13:02:22","state":"succeeded","label":"Ran on Feb 10, 2012 at  1:02:19 PM <br /> Succeeded on Feb 10, 2012 at  1:02:22 PM <br />Duration: 2.8","start_time":"2012-02-10 13:02:19"}
          ],
          "label":"group-b",
          "id":2
        },
        { "param":{"code":"2007"},
          "titleLink":"schedules/3",
          "values":[
            {"tipLink":"schedules/3/executions/551428","end_time":"2012-02-09 14:02:29","state":"succeeded","label":"Ran on Feb  9, 2012 at  2:02:24 PM <br /> Succeeded on Feb  9, 2012 at  2:02:29 PM <br />Duration: 5.2","start_time":"2012-02-09 14:02:24"},
            {"tipLink":"schedules/3/executions/551652","end_time":"2012-02-09 15:03:37","state":"succeeded","label":"Ran on Feb  9, 2012 at  3:03:27 PM <br /> Succeeded on Feb  9, 2012 at  3:03:37 PM <br />Duration: 9.9","start_time":"2012-02-09 15:03:27"},
            {"tipLink":"schedules/3/executions/551863","end_time":"2012-02-09 16:02:40","state":"succeeded","label":"Ran on Feb  9, 2012 at  4:02:28 PM <br /> Succeeded on Feb  9, 2012 at  4:02:40 PM <br />Duration: 11.5","start_time":"2012-02-09 16:02:28"},
            {"tipLink":"schedules/3/executions/552101","end_time":"2012-02-09 17:02:38","state":"succeeded","label":"Ran on Feb  9, 2012 at  5:02:29 PM <br /> Succeeded on Feb  9, 2012 at  5:02:38 PM <br />Duration: 9.2","start_time":"2012-02-09 17:02:29"},
            {"tipLink":"schedules/3/executions/552312","end_time":"2012-02-09 18:02:38","state":"succeeded","label":"Ran on Feb  9, 2012 at  6:02:34 PM <br /> Succeeded on Feb  9, 2012 at  6:02:38 PM <br />Duration: 4.0","start_time":"2012-02-09 18:02:34"},
            {"tipLink":"schedules/3/executions/552469","end_time":"2012-02-09 19:02:30","state":"succeeded","label":"Ran on Feb  9, 2012 at  7:02:21 PM <br /> Succeeded on Feb  9, 2012 at  7:02:30 PM <br />Duration: 8.8","start_time":"2012-02-09 19:02:21"},
            {"tipLink":"schedules/3/executions/552669","end_time":"2012-02-09 20:02:42","state":"succeeded","label":"Ran on Feb  9, 2012 at  8:02:31 PM <br /> Succeeded on Feb  9, 2012 at  8:02:42 PM <br />Duration: 11.4","start_time":"2012-02-09 20:02:31"},
            {"tipLink":"schedules/3/executions/552822","end_time":"2012-02-09 21:02:30","state":"succeeded","label":"Ran on Feb  9, 2012 at  9:02:26 PM <br /> Succeeded on Feb  9, 2012 at  9:02:30 PM <br />Duration: 3.6","start_time":"2012-02-09 21:02:26"},
            {"tipLink":"schedules/3/executions/552999","end_time":"2012-02-09 22:02:29","state":"succeeded","label":"Ran on Feb  9, 2012 at 10:02:25 PM <br /> Succeeded on Feb  9, 2012 at 10:02:29 PM <br />Duration: 3.6","start_time":"2012-02-09 22:02:25"},
            {"tipLink":"schedules/3/executions/553187","end_time":"2012-02-09 23:02:35","state":"succeeded","label":"Ran on Feb  9, 2012 at 11:02:31 PM <br /> Succeeded on Feb  9, 2012 at 11:02:35 PM <br />Duration: 3.7","start_time":"2012-02-09 23:02:31"},
            {"tipLink":"schedules/3/executions/553333","end_time":"2012-02-10 00:02:27","state":"succeeded","label":"Ran on Feb 10, 2012 at 12:02:23 AM <br /> Succeeded on Feb 10, 2012 at 12:02:27 AM <br />Duration: 4.5","start_time":"2012-02-10 00:02:23"},
            {"tipLink":"schedules/3/executions/553847","end_time":"2012-02-10 01:02:36","state":"succeeded","label":"Ran on Feb 10, 2012 at  1:02:29 AM <br /> Succeeded on Feb 10, 2012 at  1:02:36 AM <br />Duration: 6.5","start_time":"2012-02-10 01:02:29"},
            {"tipLink":"schedules/3/executions/554014","end_time":"2012-02-10 02:02:36","state":"succeeded","label":"Ran on Feb 10, 2012 at  2:02:32 AM <br /> Succeeded on Feb 10, 2012 at  2:02:36 AM <br />Duration: 3.7","start_time":"2012-02-10 02:02:32"},
            {"tipLink":"schedules/3/executions/554165","end_time":"2012-02-10 03:02:26","state":"succeeded","label":"Ran on Feb 10, 2012 at  3:02:22 AM <br /> Succeeded on Feb 10, 2012 at  3:02:26 AM <br />Duration: 4.0","start_time":"2012-02-10 03:02:22"},
            {"tipLink":"schedules/3/executions/554352","end_time":"2012-02-10 04:02:30","state":"succeeded","label":"Ran on Feb 10, 2012 at  4:02:27 AM <br /> Succeeded on Feb 10, 2012 at  4:02:30 AM <br />Duration: 3.3","start_time":"2012-02-10 04:02:27"},
            {"tipLink":"schedules/3/executions/554525","end_time":"2012-02-10 05:02:35","state":"succeeded","label":"Ran on Feb 10, 2012 at  5:02:29 AM <br /> Succeeded on Feb 10, 2012 at  5:02:35 AM <br />Duration: 6.1","start_time":"2012-02-10 05:02:29"},
            {"tipLink":"schedules/3/executions/554681","end_time":"2012-02-10 06:02:26","state":"succeeded","label":"Ran on Feb 10, 2012 at  6:02:22 AM <br /> Succeeded on Feb 10, 2012 at  6:02:26 AM <br />Duration: 3.5","start_time":"2012-02-10 06:02:22"},
            {"tipLink":"schedules/3/executions/554867","end_time":"2012-02-10 07:02:29","state":"succeeded","label":"Ran on Feb 10, 2012 at  7:02:26 AM <br /> Succeeded on Feb 10, 2012 at  7:02:29 AM <br />Duration: 3.6","start_time":"2012-02-10 07:02:26"},
            {"tipLink":"schedules/3/executions/555038","end_time":"2012-02-10 08:02:33","state":"succeeded","label":"Ran on Feb 10, 2012 at  8:02:27 AM <br /> Succeeded on Feb 10, 2012 at  8:02:33 AM <br />Duration: 6.5","start_time":"2012-02-10 08:02:27"},
            {"tipLink":"schedules/3/executions/555270","end_time":"2012-02-10 09:03:31","state":"succeeded","label":"Ran on Feb 10, 2012 at  9:03:28 AM <br /> Succeeded on Feb 10, 2012 at  9:03:31 AM <br />Duration: 3.0","start_time":"2012-02-10 09:03:28"},
            {"tipLink":"schedules/3/executions/555452","end_time":"2012-02-10 10:03:32","state":"succeeded","label":"Ran on Feb 10, 2012 at 10:03:29 AM <br /> Succeeded on Feb 10, 2012 at 10:03:32 AM <br />Duration: 3.1","start_time":"2012-02-10 10:03:29"},
            {"tipLink":"schedules/3/executions/555584","end_time":"2012-02-10 11:02:33","state":"succeeded","label":"Ran on Feb 10, 2012 at 11:02:29 AM <br /> Succeeded on Feb 10, 2012 at 11:02:33 AM <br />Duration: 4.0","start_time":"2012-02-10 11:02:29"},
            {"tipLink":"schedules/3/executions/555772","end_time":"2012-02-10 12:02:43","state":"succeeded","label":"Ran on Feb 10, 2012 at 12:02:31 PM <br /> Succeeded on Feb 10, 2012 at 12:02:43 PM <br />Duration: 11.8","start_time":"2012-02-10 12:02:31"},
            {"tipLink":"schedules/3/executions/555948","end_time":"2012-02-10 13:02:36","state":"succeeded","label":"Ran on Feb 10, 2012 at  1:02:29 PM <br /> Succeeded on Feb 10, 2012 at  1:02:36 PM <br />Duration: 6.9","start_time":"2012-02-10 13:02:29"}
          ],
          "label":"groups-c",
          "id":3
        }];
    
    var startX = new Date("2012/02/09 14:02:24")
      , endX = new Date("2012/02/10 13:16:33")
      , width = 1200
      , leftMargin = 200
      , rightMargin = 50
      , topMargin = 50
      , bottomMargin = 0
      , barHeight = 35;
    
    var gantt_chart = new GanttChart("#chart-div", data, {
        width: width
      , height: data.length * (bottomMargin + barHeight) + topMargin + 30
      , topMargin: topMargin
      , bottomMargin: bottomMargin
      , leftMargin: leftMargin
      , rightMargin: rightMargin
      , barHeight: barHeight
      , startX: startX
      , endX: endX
      , xNumTicks: 16
      , xTransform: function(d){ return new Date(d.replace(/-/g, '/')); }
      , xScale: d3.time.scale().domain([startX, endX]).range([0, width - leftMargin - rightMargin])
      // , fill: d3.scale.ordinal().range(['#77c5d5', '#ed8b00', '#78be20', '#f3d03e', '#d14124', '#0092bc']) //use fill function to style each series based on id
      , useTipsy: true
      , label: function(d){ 
        return "Started at: " + d.start_time + "UTC <br />" + 
          "Ended at: " + d.end_time + "UTC <br />" + 
          "duration: " + d3.format(".2f")((new Date(d.end_time) - new Date(d.start_time)) / 1000) + " sec"; 
      }
      , rowBackground: "#333"
    });
      
    </script>
